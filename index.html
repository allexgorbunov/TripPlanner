<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="theme-color" content="#007AFF">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon-192.svg">
    <title>–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="app">
        <header>
            <h1>üß≠ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫</h1>
        </header>

        <main id="trip-list">
            <div id="empty-state" class="hidden">
                <div class="empty-icon">‚úàÔ∏è</div>
                <p>–ù–µ—Ç –ø–æ–µ–∑–¥–æ–∫</p>
                <p class="hint">–ù–∞–∂–º–∏ + —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å</p>
            </div>
        </main>

        <button id="add-btn" class="fab">+</button>
    </div>

    <!-- Trip Modal -->
    <div id="modal" class="modal hidden">
        <div class="modal-content">
            <h2 id="modal-title">–ù–æ–≤–∞—è –ø–æ–µ–∑–¥–∫–∞</h2>
            <form id="trip-form">
                <input type="text" id="trip-name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ" required>
                <input type="text" id="trip-destination" placeholder="–ú–µ—Å—Ç–æ" required>
                <div class="date-row">
                    <div class="date-group">
                        <label>–ù–∞—á–∞–ª–æ</label>
                        <input type="date" id="trip-start" required>
                    </div>
                    <div class="date-group">
                        <label>–ö–æ–Ω–µ—Ü</label>
                        <input type="date" id="trip-end" required>
                    </div>
                </div>
                <textarea id="trip-notes" placeholder="–ó–∞–º–µ—Ç–∫–∏" rows="3"></textarea>
                <div class="form-actions">
                    <button type="button" id="cancel-btn" class="btn-secondary">–û—Ç–º–µ–Ω–∞</button>
                    <button type="submit" class="btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Route Modal -->
    <div id="route-modal" class="modal hidden">
        <div class="modal-content">
            <h2>üó∫Ô∏è –ú–∞—Ä—à—Ä—É—Ç</h2>
            <div id="route-list" class="list-container"></div>
            <form id="route-form">
                <input type="hidden" id="route-trip-id">
                <div class="input-row">
                    <input type="text" id="route-place" placeholder="–î–æ–±–∞–≤–∏—Ç—å –º–µ—Å—Ç–æ" required>
                    <button type="submit" class="btn-primary">+</button>
                </div>
            </form>
            <button class="btn-secondary full-width" onclick="closeRouteModal()">–ì–æ—Ç–æ–≤–æ</button>
        </div>
    </div>

    <!-- Checklist Modal -->
    <div id="checklist-modal" class="modal hidden">
        <div class="modal-content">
            <h2>‚úì –ß–µ–∫-–ª–∏—Å—Ç</h2>
            <div class="progress-bar">
                <div id="checklist-progress-bar"></div>
            </div>
            <p id="checklist-progress" class="progress-text">0%</p>
            <div id="checklist-items" class="list-container"></div>
            <form id="checklist-form">
                <input type="hidden" id="checklist-trip-id">
                <div class="input-row">
                    <input type="text" id="checklist-text" placeholder="–î–æ–±–∞–≤–∏—Ç—å –ø—É–Ω–∫—Ç" required>
                    <button type="submit" class="btn-primary">+</button>
                </div>
            </form>
            <button class="btn-secondary full-width" onclick="closeChecklistModal()">–ì–æ—Ç–æ–≤–æ</button>
        </div>
    </div>

    <!-- Currency Modal -->
    <div id="currency-modal" class="modal hidden">
        <div class="modal-content">
            <h2>üí± –ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä</h2>
            <form id="currency-form">
                <input type="hidden" id="currency-trip-id">
                <div class="currency-row">
                    <input type="number" id="currency-amount" placeholder="–°—É–º–º–∞" step="0.01">
                    <select id="currency-from"></select>
                </div>
                <div class="currency-arrow">‚Üí</div>
                <div class="currency-row">
                    <input type="text" id="currency-result" placeholder="–†–µ–∑—É–ª—å—Ç–∞—Ç" readonly>
                    <select id="currency-to"></select>
                </div>
                <button type="button" class="btn-primary full-width" onclick="convertCurrency()">–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
            </form>
            <button class="btn-secondary full-width" onclick="closeCurrencyModal()">–ì–æ—Ç–æ–≤–æ</button>
        </div>
    </div>

    <script src="app.js"></script>
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js');
        }
    </script>
</body>
</html>
